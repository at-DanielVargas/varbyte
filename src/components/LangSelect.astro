---
const { lang } = Astro.props;
const hash = typeof window !== "undefined" ? window.location.hash : "";
---

<style>
  .dropdown {
    position: relative;
    display: inline-block;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: white;
    min-width: 80px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-radius: 0.375rem;
    z-index: 10;
    margin-top: 0;
  }
  .dropdown:hover .dropdown-content,
  .dropdown:focus-within .dropdown-content {
    display: block;
  }
</style>

<div class="dropdown">
  <button
    class="flex items-center font-mono text-sm px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 transition-colors focus:outline-none"
    aria-haspopup="true"
    aria-expanded="false"
    type="button"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-4 w-4 mr-2 text-gray-500"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <circle
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="2"
        fill="none"></circle>
      <path
        d="M2 12h20M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20"
        stroke="currentColor"
        stroke-width="2"
        fill="none"></path>
    </svg>
    {lang.toUpperCase()}
    <svg class="ml-1 h-3 w-3 text-gray-400" fill="none" viewBox="0 0 20 20">
      <path
        d="M6 8l4 4 4-4"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"></path>
    </svg>
  </button>
  <div class="dropdown-content shadow-lg border border-gray-100">
    <a
      href={`/es${hash}`}
      class={`block px-4 py-2 text-sm ${lang === "es" ? "font-bold text-gray-900 bg-gray-100" : "text-gray-700 hover:bg-gray-50"}`}
      aria-current={lang === "es" ? "page" : undefined}
    >
      Espa√±ol
    </a>
    <a
      href={`/en${hash}`}
      class={`block px-4 py-2 text-sm ${lang === "en" ? "font-bold text-gray-900 bg-gray-100" : "text-gray-700 hover:bg-gray-50"}`}
      aria-current={lang === "en" ? "page" : undefined}
    >
      English
    </a>
  </div>
</div>
